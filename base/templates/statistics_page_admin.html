{% extends "home_page_admin.html" %}
{% load static %}
{% load request_tag %}

{% block static_masir %}
    {% url 'home_page_link' %}
{% endblock %}
{% block mainblock %}
    <div style="width: 100vw; height: 100vh; position: relative; overflow: hidden;">
        <div id="masir-map3-background"></div>
        <div class="position-absolute top-50 start-50 translate-middle scroll-without-scrollbar w-100"
             style="max-height: 80vh; overflow: scroll;">
            <div class="w-75 mt-5 mx-auto">
                <div class="mb-2 pb-2" style="background-color: #ffcbfb;">
                    <div class="p-2 d-flex justify-content-between" style="background-color: #eeeeee;">
                  <span>
                    آمار کلی مسابقه
                  </span>
                        <span>
                  </span>
                    </div>

                    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 p-2" style="text-align: justify;">
                        <div class="w-100" style="font-weight: 700;">
                            افراد آنلاین
                            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4">
                                {% active_users in 10 minutes as user_list %}
                                {% for user in user_list %}
                                    <div class="col">
                                        {{ user.user_detail }}
                                    </div>
                                {% endfor %}
                            </div>
                        </div>

                        <div class="col" style="font-weight: 700;">
                            تعداد گروه‌ها:
                            <ul>
                                <li>
                                    {{ groups_all.0 }} گروه
                                </li>
                                <li>
                                    {{ groups_all.3 }} گروه گذشته از آموزش اولیه
                                </li>
                                <li>
                                    {{ groups_all.1 }} گروه فعال
                                </li>
                                <li>
                                    {{ groups_all.2 }} گروه که حداقل یک ماموریت انجام داده‌اند
                                </li>
                            </ul>
                        </div>
                        <div class="col" style="font-weight: 700;">
                            مجموع صدقات:
                            <ul>
                                <li>
                                    {{ charities_all.0 }} واحد
                                </li>
                                <li>
                                    {{ charities_all.1 }} گروه
                                </li>
                            </ul>
                        </div>
                        <div class="col" style="font-weight: 700;">
                            مجموع شرکت در باشگاه:
                            <ul>
                                <li>
                                    {{ club_files_all.0 }} مرتبه
                                </li>
                                <li>
                                    {{ club_files_all.1 }} نفر مختلف
                                </li>
                            </ul>
                        </div>
                        <div class="col" style="font-weight: 700;">
                            مجموع شرکت در دانشگاه:
                            <ul>
                                <li>
                                    {{ exams_all.0 }} مرتبه
                                </li>
                                <li>
                                    {{ exams_all.1 }} گروه مختلف
                                </li>
                            </ul>
                        </div>
                        <div class="col" style="font-weight: 700;">
                            تعداد اکتشاف های انجام شده:
                            <ul>
                                <li>
                                    {{ discover_all.1 }} مرتبه
                                </li>
                                <li>
                                    {{ discover_all.0 }} گروه مختلف
                                </li>
                            </ul>
                        </div>
                        <div class="col" style="font-weight: 700;">
                             مجموع شرکت در فراخوان ها:
                            <ul>
                                <li>
                                    {{ events_all.0 }} مرتبه
                                </li>
                                <li>
                                    {{ events_all.1 }} گروه مختلف
                                </li>
                            </ul>
                        </div>
                        <div class="w-100" style="font-weight: 700;">
                            دفعات انجام هر ماموریت:
                            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4">
                                {% for x in activity_topic_all %}
                                    <div class="col">
                                        {{ x.topic__title }} | {{ x.topic__manzel__number }}
                                        <ul>
                                            <li style="font-weight: 700;">
                                                {{ x.count }}
                                            </li>
                                        </ul>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>

                {% comment %}
              <div class="mb-2 pb-2" style="background-color: #ffcbfb;">
                <div class="p-2 d-flex justify-content-between" style="background-color: #eeeeee;">
                  <span>
                    آمار آرای مردمی
                  </span>
                  <span>
                  </span>
                </div>

                <div class="row p-2" style="text-align: justify;">
                  <div class="col-md-6">
                    <span style="font-weight: 700;">
                      تعداد پیامک‌های ارسال شده:
                    </span>
                    {{ votes.all }}
                    پیامک
                  </div>
                  <div class="col-md-6">
                    <span style="font-weight: 700;">
                      تعداد آرای معتبر ارسال شده:
                    </span>
                    {{ votes.all_valid }}
                    رای
                  </div>

                  <div class="w-100 mt-2" style="font-weight: 700;">
                    آرای هر اثر:
                    <div class="mt-1 d-flex justify-content-between">
                      <span> تصویر شماره 1 </span>
                      <span> {{ votes.image_1.0 }} رای </span>
                    </div>
                    <div class="progress" style="height: 2px;">
                      <div class="progress-bar bg-dark" role="progressbar" aria-valuenow="{{votes.image_1.1}}" aria-valuemin="0" aria-valuemax="100" style="width: {{votes.image_1.1}}%;"></div>
                    </div>

                    <div class="mt-1 d-flex justify-content-between">
                      <span> تصویر شماره 2 </span>
                      <span> {{ votes.image_2.0 }} رای </span>
                    </div>
                    <div class="progress" style="height: 2px;">
                      <div class="progress-bar bg-dark" role="progressbar" aria-valuenow="{{votes.image_2.1}}" aria-valuemin="0" aria-valuemax="100" style="width: {{votes.image_2.1}}%;"></div>
                    </div>

                    <div class="mt-1 d-flex justify-content-between">
                      <span> تصویر شماره 3 </span>
                      <span> {{ votes.image_3.0 }} رای </span>
                    </div>
                    <div class="progress" style="height: 2px;">
                      <div class="progress-bar bg-dark" role="progressbar" aria-valuenow="{{votes.image_3.1}}" aria-valuemin="0" aria-valuemax="100" style="width: {{votes.image_3.1}}%;"></div>
                    </div>

                    <div class="mt-1 d-flex justify-content-between">
                      <span> تصویر شماره 4 </span>
                      <span> {{ votes.image_4.0 }} رای </span>
                    </div>
                    <div class="progress" style="height: 2px;">
                      <div class="progress-bar bg-dark" role="progressbar" aria-valuenow="{{votes.image_4.1}}" aria-valuemin="0" aria-valuemax="100" style="width: {{votes.image_4.1}}%;"></div>
                    </div>

                    <div class="mt-1 d-flex justify-content-between">
                      <span> تصویر شماره 5 </span>
                      <span> {{ votes.image_5.0 }} رای </span>
                    </div>
                    <div class="progress" style="height: 2px;">
                      <div class="progress-bar bg-dark" role="progressbar" aria-valuenow="{{votes.image_5.1}}" aria-valuemin="0" aria-valuemax="100" style="width: {{votes.image_5.1}}%;"></div>
                    </div>

                    <div class="mt-1 d-flex justify-content-between">
                      <span> صوت شماره 1 </span>
                      <span> {{ votes.music_1.0 }} رای </span>
                    </div>
                    <div class="progress" style="height: 2px;">
                      <div class="progress-bar bg-dark" role="progressbar" aria-valuenow="{{votes.music_1.1}}" aria-valuemin="0" aria-valuemax="100" style="width: {{votes.music_1.1}}%;"></div>
                    </div>

                    <div class="mt-1 d-flex justify-content-between">
                      <span> صوت شماره 2 </span>
                      <span> {{ votes.music_2.0 }} رای </span>
                    </div>
                    <div class="progress" style="height: 2px;">
                      <div class="progress-bar bg-dark" role="progressbar" aria-valuenow="{{votes.music_2.1}}" aria-valuemin="0" aria-valuemax="100" style="width: {{votes.music_2.1}}%;"></div>
                    </div>

                    <div class="mt-1 d-flex justify-content-between">
                      <span> صوت شماره 3 </span>
                      <span> {{ votes.music_3.0 }} رای </span>
                    </div>
                    <div class="progress" style="height: 2px;">
                      <div class="progress-bar bg-dark" role="progressbar" aria-valuenow="{{votes.music_3.1}}" aria-valuemin="0" aria-valuemax="100" style="width: {{votes.music_3.1}}%;"></div>
                    </div>

                    <div class="mt-1 d-flex justify-content-between">
                      <span> صوت شماره 4 </span>
                      <span> {{ votes.music_4.0 }} رای </span>
                    </div>
                    <div class="progress" style="height: 2px;">
                      <div class="progress-bar bg-dark" role="progressbar" aria-valuenow="{{votes.music_4.1}}" aria-valuemin="0" aria-valuemax="100" style="width: {{votes.music_4.1}}%;"></div>
                    </div>

                    <div class="mt-1 d-flex justify-content-between">
                      <span> صوت شماره 5 </span>
                      <span> {{ votes.music_5.0 }} رای </span>
                    </div>
                    <div class="progress" style="height: 2px;">
                      <div class="progress-bar bg-dark" role="progressbar" aria-valuenow="{{votes.music_5.1}}" aria-valuemin="0" aria-valuemax="100" style="width: {{votes.music_5.1}}%;"></div>
                    </div>

                    <div class="mt-1 d-flex justify-content-between">
                      <span> فیلم شماره 1 </span>
                      <span> {{ votes.video_1.0 }} رای </span>
                    </div>
                    <div class="progress" style="height: 2px;">
                      <div class="progress-bar bg-dark" role="progressbar" aria-valuenow="{{votes.video_1.1}}" aria-valuemin="0" aria-valuemax="100" style="width: {{votes.video_1.1}}%;"></div>
                    </div>

                    <div class="mt-1 d-flex justify-content-between">
                      <span> فیلم شماره 2 </span>
                      <span> {{ votes.video_2.0 }} رای </span>
                    </div>
                    <div class="progress" style="height: 2px;">
                      <div class="progress-bar bg-dark" role="progressbar" aria-valuenow="{{votes.video_2.1}}" aria-valuemin="0" aria-valuemax="100" style="width: {{votes.video_2.1}}%;"></div>
                    </div>

                    <div class="mt-1 d-flex justify-content-between">
                      <span> فیلم شماره 3 </span>
                      <span> {{ votes.video_3.0 }} رای </span>
                    </div>
                    <div class="progress" style="height: 2px;">
                      <div class="progress-bar bg-dark" role="progressbar" aria-valuenow="{{votes.video_3.1}}" aria-valuemin="0" aria-valuemax="100" style="width: {{votes.video_3.1}}%;"></div>
                    </div>

                    <div class="mt-1 d-flex justify-content-between">
                      <span> فیلم شماره 4 </span>
                      <span> {{ votes.video_4.0 }} رای </span>
                    </div>
                    <div class="progress" style="height: 2px;">
                      <div class="progress-bar bg-dark" role="progressbar" aria-valuenow="{{votes.video_4.1}}" aria-valuemin="0" aria-valuemax="100" style="width: {{votes.video_4.1}}%;"></div>
                    </div>

                    <div class="mt-1 d-flex justify-content-between">
                      <span> فیلم شماره 5 </span>
                      <span> {{ votes.video_5.0 }} رای </span>
                    </div>
                    <div class="progress" style="height: 2px;">
                      <div class="progress-bar bg-dark" role="progressbar" aria-valuenow="{{votes.video_5.1}}" aria-valuemin="0" aria-valuemax="100" style="width: {{votes.video_5.1}}%;"></div>
                    </div>
                  </div>
                </div>
              </div>
                {% endcomment %}

                {% for x in groups %}
                    <div class="mb-2 pb-2" style="background-color: #cbe2ff;">
                        <div class="p-2 d-flex justify-content-between" style="background-color: #eeeeee;">
                    <span>
                      {{ x }}
                    </span>
                            <span>
                    </span>
                        </div>

                        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 p-2" style="text-align: justify;">
                            <div class="col">
                                اعضا:
                                <ul>
                                    {% for u in x.users.all %}
                                        <li>
                                            {{ u }} : {{ u.school }}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <div class="col">
                                امتیازها:
                                <ul>
                                    <li>
                                        حیات:
                                        {{ x.get_light }}
                                    </li>
                                    <li>
                                        آذوقه:
                                        {{ x.get_food }}
                                    </li>
                                    <li>
                                        توان:
                                        {{ x.get_power }}
                                    </li>
                                    <li>
                                        منزل فعلی:
                                        {{ x.get_manzel.number }}
                                    </li>
                                </ul>
                            </div>
                            <div class="col">
                                ماموریت‌های انجام شده:
                                <ul>
                                    {% for a in x.activities.all %}
                                        <li {% if a.state == '4' %} style="font-weight: 700;" {% endif %}>
                                            {{ a.topic }} | {{ a.template.get_title }} | {{ a.get_score }}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <div class="col">
                                باشگاه:
                                <ul>
                                    {% for u in x.users.all %}
                                        {% for c in u.club_files.all %}
                                            <li {% if c.show_public and c.verified %} style="font-weight: 700;" {% endif %}>
                                                {{ u }} | {{ c.level }}
                                            </li>
                                        {% endfor %}
                                    {% endfor %}
                                </ul>
                            </div>
                            <div class="col">
                                دانشگاه:
                                <ul>
                                    {% for u in x.exams.all %}
                                        <li {% if u.show_public %} style="font-weight: 700;" {% endif %}>
                                            {{ u.exam }} | {{ u.score }}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <div class="col">
                                صدقات:
                                <ul>
                                    {% for u in x.charities.all %}
                                        <li {% if u.show_public %} style="font-weight: 700;" {% endif %}>
                                            {{ u.value }}
                                        </li>
                                    {% endfor %}
                                </ul>
                                دورریز:
                                <ul>
                                    {% for u in x.trashes.all %}
                                        <li {% if u.show_public %} style="font-weight: 700;" {% endif %}>
                                            {{ u.food }}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <div class="col">
                                نشان‌های کسب شده:
                                <ul>
                                    {% for u in x.get_achivements %}
                                        <li>
                                            {{ u.achivement }} | {{ u.score }}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <div class="col">
                                اکتشاف های انجام شده:
                                <ul>
                                    {% for u in x.discovered.all %}
                                        {% if not u.main %}
                                            <li>
                                                {{ u.title }} | {{ u.manzel.number }}
                                            </li>
                                        {% endif %}
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}

{% block scriptblock %}
    <!-- Bootstrap -->
    <script src="{% static 'bootstrap/js/bootstrap.bundle.min.js' %}"></script>

    <script type="text/javascript">
        var map = ["&\#1776;", "&\#1777;", "&\#1778;", "&\#1779;", "&\#1780;", "&\#1781;", "&\#1782;", "&\#1783;", "&\#1784;", "&\#1785;"];
        document.getElementById("maindiv").innerHTML = document.getElementById("maindiv").innerHTML.replace(/\d(?=[^<>]*(<|$))/g, function ($0) {
            return map[$0]
        });
    </script>

    <script>
        function club_admin_form_click() {
            document.getElementById('club_admin_form').style.display = 'none';
            document.getElementById('club_admin_form_loading').style.display = 'block';
        }
    </script>
{% endblock %}
